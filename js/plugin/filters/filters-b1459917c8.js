!function(t){t.fn.filters=function(n){var e={filter:{name:"filter",element:"a",active:"active"},container:{name:"container",element:"li"},css3:{init:!0,children:"div",property:"all 1s ease",transform:{scale:"0"}},move:{init:!0,easing:"linear",duration:500},fade:{duration:[500,500],opacity:[0,1]},fixed:!1,onclick:function(i,t){}},s=t.extend(!0,e,n);return this.each(function(){var n=t(this),o=n.find("."+s.filter.name);C=n.find("."+s.container.name),P={init:function(){this._globals.init(),this._height.update(L),s.css3.init&&this._css3.init(),this._elements.init(),this._collection.init(),this.events.init()},_globals:{init:function(){e={w:n.width(),h:n.height()},A=o.find(s.filter.element),E=C.find(s.container.element),ED={w:E.outerWidth(!0),h:E.outerHeight(!0)},L=E.length,CSS3=s.css3,MOVE=s.move,FIXED=s.fixed,FADE=s.fade,POS=[],COL=[],COLUMN=Math.floor(e.w/ED.w)}},_height:{update:function(i,t){var n=Math.ceil(i/COLUMN),e={height:ED.h*n};C.css(e)}},_css3:{init:function(){var i=s.css3.property,t={"-webkit-transition":i,"-moz-transition":i,"-o-transition":i,transition:i};E.children().css(t)},transform:function(n){var e=[],s=t.extend({},this.css,n);for(i in s){var o=s[i];e.push(i+"("+o+")")}var a=e.join(" ");return{"-webkit-transform":a,"-moz-transform":a,"-o-transform":a,transform:a}},reset:function(){var i=this.transform(this.css);return i},css:{scale:"1",rotate:"0",translate:"0, 0",skew:"0"}},_elements:{init:function(){this.position(),this.css()},css:function(){var i={position:"absolute",overflow:"hidden",display:"block"};E.css(i)},position:function(){E.each(function(){var i=t(this),n=i.position(),e=n.left,s=n.top,o={top:s,left:e,zIndex:1};POS.push(o),i.css(o)})}},_collection:{init:function(){this.add()},add:function(){A.each(function(i){var n=t(this),e=n.attr("rel");if("undefined"!=typeof e){var s=E.filter("."+e);COL.push(s)}})},position:function(){for(i in COL){var n=-1,e=-1;COL[i].each(function(i){var s=t(this);e++,i%COLUMN==0&&(n++,e=0);var o=ED.h*n,a=a=ED.w*e,r={top:o,left:a};s.animate(r,MOVE.duration,MOVE.easing)})}}},_transition:{element:function(i,t){if(CSS3.init){var n=CSS3.transform,e=P._css3.transform(n),s=P._css3.reset();t.children(CSS3.children).css(e),i.children(CSS3.children).css(s)}else t.stop(!0,!0).fadeTo(FADE.duration[0],FADE.opacity[0]),i.stop(!0,!0).fadeTo(FADE.duration[1],FADE.opacity[1]);MOVE.init&&P._collection.position()},all:function(){if(CSS3.init){var i=P._css3.reset();E.children(CSS3.children).css(i)}else E.fadeTo(FADE.duration[1],FADE.opacity[1])}},events:{init:function(){this.click()},click:function(){A.click(function(){var i=t(this),n=i.attr("rel"),e=s.filter.active;if("all"==n)MOVE.init?E.each(function(i){var n=t(this),e=POS[i];n.animate(e,MOVE.duration,MOVE.easing,P._transition.all)}):P._transition.all(),!FIXED&&MOVE.init&&P._height.update(L);else{var o=E.filter("."+n),a=E.not(o),r=o.length,c={zIndex:10};o.css(c),c.zIndex=1,a.css(c),!FIXED&&MOVE.init&&P._height.update(r),P._transition.element(o,a)}return A.removeClass(e),i.addClass(e),s.onclick.call(this,i,o||E),!1})}}},P.init()})}}(jQuery);